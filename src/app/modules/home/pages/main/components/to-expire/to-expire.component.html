<div *ngIf="territories !== undefined" class="card card-simple-info border-none my-2 p-3">
    <div class="row">
        <div class="col-12">
            <h4>Territorios por vencer</h4>
        </div>
    </div>
    <div *ngFor="let territory of territories.slice(0,4)">
        <div [ngClass]="{
            'alert-danger' : dateToExpire( territory.last_date) > 3,
            'alert-warning' : dateToExpire( territory.last_date) == 3,
            'alert-dark' : dateToExpire( territory.last_date) == 2
            }"
            class="alert card-body my-3 border">
            <div *ngIf="!territory" class="row">
                <p>No hay territorios por vencer</p>
            </div>
            <div *ngIf="territory" class="row">
                <div class="col-12 col-md-6">
                    <p><strong>Territorio: </strong>{{ territory.number }}</p>
                    <p><strong>Publicador: </strong>{{ territory.publisher }}</p>
                </div>
                <div class="col-12 col-md-6">
                    <p><strong>Fecha de asignado: </strong>{{ territory.date_assigned }}</p>
                    <small *ngIf=" dateToExpire( territory.last_date) > 1">Hace {{ dateToExpire( territory.last_date) }} meses aproximadamente </small>
                    <small *ngIf=" dateToExpire( territory.last_date) == 1">Hace {{ dateToExpire( territory.last_date) }} mes aproximadamente </small>
                    <small *ngIf=" dateToExpire( territory.last_date) == 0.5">Hace menos de un mes </small>
                </div>
                <div class="col-12 col-md-6">
                    <button [routerLink]="['/admin/territories/detail/' + territory.id]" class="btn btn-custom">Ver territorio</button>
                </div>
            </div>
        </div>
    </div>
</div>
